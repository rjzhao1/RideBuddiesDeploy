{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import{connect}from'react-redux';// Custom Ride Element that display all the information of \n// A ride on a row of a table\nvar Ride=function Ride(props){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:'/rides/view/'+props.rides._id},props.rides.group_Name)),/*#__PURE__*/React.createElement(\"td\",null,props.rides.host_email),/*#__PURE__*/React.createElement(\"td\",null,props.rides.pickup),/*#__PURE__*/React.createElement(\"td\",null,props.rides.location),/*#__PURE__*/React.createElement(\"td\",null,props.rides.date.substring(0,10)+' '+props.rides.time),/*#__PURE__*/React.createElement(\"td\",null,props.rides.seats),/*#__PURE__*/React.createElement(\"td\",null,props.user.email===props.rides.host_email?'Yes':'No'),/*#__PURE__*/React.createElement(\"td\",null,props.user.email===props.rides.host_email?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger btn-small mr-1\",onClick:function onClick(){props.deleteRides(props.rides._id);}},\"delete\"):''));};var MyRidesList=/*#__PURE__*/function(_Component){_inherits(MyRidesList,_Component);var _super=_createSuper(MyRidesList);function MyRidesList(props){var _this;_classCallCheck(this,MyRidesList);_this=_super.call(this,props);var user=_this.props.auth.user;_this.deleteRides=_this.deleteRides.bind(_assertThisInitialized(_this));_this.state={rides:[],user:user};return _this;}// Take the list of rides and filter the rides the users\n// are in \n_createClass(MyRidesList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var user=this.props.auth.user;axios.get('/api/rides/myRides').then(function(response){_this2.setState({rides:response.data.filter(function(rl){return rl.passenger.some(function(passengers){return passengers.passenger_email===user.email;})||rl.host_email===user.email;})});}).catch(function(error){return console.log(error);});}// Function to delete rides\n},{key:\"deleteRides\",value:function deleteRides(id){axios.delete('/api/rides/'+id,{data:{host_email:this.state.user.email}}).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});this.setState({rides:this.state.rides.filter(function(rl){return rl._id!==id;})});}// Map each rides to a Ride element\n},{key:\"rideList\",value:function rideList(){var _this3=this;return this.state.rides.map(function(currRide){return/*#__PURE__*/React.createElement(Ride,{rides:currRide,user:_this3.state.user,deleteRides:_this3.deleteRides,key:currRide._id});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Back to Home\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Your Rides\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Group Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Host Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Pickup\"),/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Seats Available\"),/*#__PURE__*/React.createElement(\"th\",null,\"Host ?\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,this.rideList())));}}]);return MyRidesList;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps)(MyRidesList);","map":{"version":3,"sources":["C:/Users/Ricky/Projects/RideBuddiesDeploy/client/src/components/pages/my-rides.component.js"],"names":["React","Component","Link","axios","connect","Ride","props","rides","_id","group_Name","host_email","pickup","location","date","substring","time","seats","user","email","deleteRides","MyRidesList","auth","bind","state","get","then","response","setState","data","filter","rl","passenger","some","passengers","passenger_email","catch","error","console","log","id","delete","res","err","map","currRide","rideList","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\n// Custom Ride Element that display all the information of \r\n// A ride on a row of a table\r\nconst Ride = (props) => (\r\n\t<tr>\r\n\t\t<td>\r\n\t\t\t<Link to={'/rides/view/' + props.rides._id}>\r\n\t\t\t\t{props.rides.group_Name}\r\n\t\t\t</Link>\r\n\t\t</td>\r\n\t\t<td>{props.rides.host_email}</td>\r\n\t\t<td>{props.rides.pickup}</td>\r\n\t\t<td>{props.rides.location}</td>\r\n\t\t<td>{props.rides.date.substring(0, 10) + ' ' + props.rides.time}</td>\r\n\t\t<td>{props.rides.seats}</td>\r\n\t\t<td>{props.user.email === props.rides.host_email ? 'Yes' : 'No'}</td>\r\n\t\t{/* if the user is the hows show a delete button */}\r\n\t\t<td>\r\n\t\t\t{props.user.email === props.rides.host_email ? (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-danger btn-small mr-1\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tprops.deleteRides(props.rides._id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tdelete\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t</td>\r\n\t</tr>\r\n);\r\n\r\nclass MyRidesList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst { user } = this.props.auth;\r\n\t\tthis.deleteRides = this.deleteRides.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\trides: [],\r\n\t\t\tuser: user,\r\n\t\t};\r\n\t}\r\n\r\n\t// Take the list of rides and filter the rides the users\r\n\t// are in \r\n\tcomponentDidMount() {\r\n\t\tconst { user } = this.props.auth;\r\n\t\r\n\t\taxios\r\n\t\t\t.get('/api/rides/myRides')\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\trides: response.data.filter(\r\n\t\t\t\t\t\t(rl) =>\r\n\t\t\t\t\t\t\trl.passenger.some(\r\n\t\t\t\t\t\t\t\t(passengers) => passengers.passenger_email === user.email\r\n\t\t\t\t\t\t\t) || rl.host_email === user.email\r\n\t\t\t\t\t),\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.log(error));\r\n\t}\r\n\r\n\t// Function to delete rides\r\n\tdeleteRides(id) {\r\n\t\taxios\r\n\t\t\t.delete('/api/rides/' + id, {\r\n\t\t\t\tdata: { host_email: this.state.user.email },\r\n\t\t\t})\r\n\t\t\t.then((res) => console.log(res.data))\r\n\t\t\t.catch((err) => console.log(err));\r\n\r\n\t\tthis.setState({\r\n\t\t\trides: this.state.rides.filter((rl) => rl._id !== id),\r\n\t\t});\r\n\t}\r\n\r\n\t// Map each rides to a Ride element\r\n\trideList() {\r\n\t\treturn this.state.rides.map((currRide) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Ride\r\n\t\t\t\t\trides={currRide}\r\n\t\t\t\t\tuser={this.state.user}\r\n\t\t\t\t\tdeleteRides={this.deleteRides}\r\n\t\t\t\t\tkey={currRide._id}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Link to=\"/\">Back to Home</Link>\r\n\t\t\t\t<h3>Your Rides</h3>\r\n\t\t\t\t<table className=\"table\">\r\n\t\t\t\t\t{/* Heading of the table */}\r\n\t\t\t\t\t<thead className=\"thead-light\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Group Name</th>\r\n\t\t\t\t\t\t\t<th>Host Email</th>\r\n\t\t\t\t\t\t\t<th>Pickup</th>\r\n\t\t\t\t\t\t\t<th>Location</th>\r\n\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t<th>Seats Available</th>\r\n\t\t\t\t\t\t\t<th>Host ?</th>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t{/* Body of table */}\r\n\t\t\t\t\t<tbody>{this.rideList()}</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMyRidesList.propTypes = {\r\n\tauth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tauth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps)(MyRidesList);\r\n"]},"metadata":{},"sourceType":"module"}