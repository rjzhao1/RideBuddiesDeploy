{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\src\\\\components\\\\pages\\\\map.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { GoogleMap, Marker, InfoWindow, LoadScript } from \"@react-google-maps/api\";\nimport usePlacesAutocomplete, { getGeocode, getLatLng } from \"use-places-autocomplete\";\nimport { Combobox, ComboboxInput, ComboboxPopover, ComboboxList, ComboboxOption } from \"@reach/combobox\";\nimport \"@reach/combobox/styles.css\";\nimport compass from \"../../img/compass.svg\"; // height and width of the map\n\nconst mapContainerStyle = {\n  height: \"100vh\",\n  width: \"100vw\"\n}; // Default center of the map\n\nconst center = {\n  lat: 37.774929,\n  lng: -122.419418\n};\nconst options = {\n  disableDefaultUI: true,\n  zoomControl: true\n};\nconst libraries = [\"places\"];\nconst url = \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"; // Component for Search Bar for Map\n\nconst PlacesAutocomplete = props => {\n  const {\n    ready,\n    value,\n    suggestions: {\n      status,\n      data\n    },\n    setValue,\n    clearSuggestions\n  } = usePlacesAutocomplete({\n    requestOptions: {\n      location: {\n        lat: () => 37.774929,\n        lng: () => -122.419418\n      },\n      radius: 200 * 1000\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Combobox, {\n    onSelect: async address => {\n      setValue(address, false);\n      clearSuggestions();\n\n      try {\n        const results = await getGeocode({\n          address\n        });\n        const {\n          lat,\n          lng\n        } = await getLatLng(results[0]);\n        props.panTo({\n          lat,\n          lng\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ComboboxInput, {\n    value: value,\n    onChange: e => {\n      setValue(e.target.value);\n    },\n    disabled: !ready,\n    placeholder: \"Enter an address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(ComboboxPopover, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ComboboxList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 25\n    }\n  }, status === \"OK\" && data.map(({\n    id,\n    description\n  }) => /*#__PURE__*/React.createElement(ComboboxOption, {\n    key: id,\n    value: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }))))));\n}; // Component for locating current location\n\n\nconst Locate = props => {\n  return /*#__PURE__*/React.createElement(\"button\", {\n    className: \"locate\",\n    onClick: () => {\n      navigator.geolocation.getCurrentPosition(position => {\n        props.panTo({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        });\n      }, () => null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: compass,\n    alt: \"compass - locate me\",\n    style: {\n      width: \"40px\",\n      height: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }));\n};\n\nclass RideMap extends Component {\n  constructor(props) {\n    super(props);\n    this.onMapLoad = this.onMapLoad.bind(this);\n    this.panTo = this.panTo.bind(this);\n    this.state = {\n      selected: null,\n      map: {},\n      rides: [],\n      currlat: null,\n      currlong: null,\n      currSelected: false\n    };\n  } // Receiving all the rides avalible from the backend\n\n\n  componentDidMount() {\n    axios.get('/api/rides').then(response => {\n      this.setState({\n        rides: response.data\n      });\n    }).catch(error => console.log(error));\n  } // Load the map object\n\n\n  onMapLoad(map) {\n    this.setState({\n      map: map\n    });\n  } // Function to zoom to a certain location on the map\n\n\n  panTo({\n    lat,\n    lng\n  }) {\n    this.state.map.panTo({\n      lat,\n      lng\n    });\n    this.state.map.setZoom(15);\n    this.setState({\n      currlat: lat,\n      currlong: lng\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(LoadScript, {\n      googleMapsApiKey: process.env.REACT_APP_GOOGLE_KEY,\n      libraries: libraries,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PlacesAutocomplete, {\n      panTo: this.panTo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Locate, {\n      panTo: this.panTo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 21\n      }\n    }, \"Rides Locations\"), /*#__PURE__*/React.createElement(GoogleMap, {\n      mapContainerStyle: mapContainerStyle,\n      zoom: 8,\n      center: center,\n      options: options,\n      onLoad: this.onMapLoad,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }, this.state.rides.map(currRide => /*#__PURE__*/React.createElement(Marker, {\n      key: currRide.id,\n      position: {\n        lat: currRide.lat,\n        lng: currRide.lng\n      },\n      onClick: () => this.setState({\n        selected: currRide\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    })), this.state.currlat ? /*#__PURE__*/React.createElement(Marker, {\n      key: 1,\n      position: {\n        lat: this.state.currlat,\n        lng: this.state.currlong\n      },\n      icon: {\n        url: url\n      },\n      onClick: () => this.setState({\n        currSelected: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 29\n      }\n    }) : \"\", this.state.currSelected ? /*#__PURE__*/React.createElement(InfoWindow, {\n      position: {\n        lat: this.state.currlat,\n        lng: this.state.currlong\n      },\n      onCloseClick: () => this.setState({\n        currSelected: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 33\n      }\n    }, \"You are here!\")) : null, this.state.selected ? /*#__PURE__*/React.createElement(InfoWindow, {\n      position: {\n        lat: this.state.selected.lat,\n        lng: this.state.selected.lng\n      },\n      onCloseClick: () => this.setState({\n        selected: null\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 26\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"info-box\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 30\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 33\n      }\n    }, this.state.selected.group_Name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-subtitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 33\n      }\n    }, \"Seats: \", this.state.selected.seats), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-subtitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 33\n      }\n    }, \"Where:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 33\n      }\n    }, this.state.selected.location), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-subtitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, \"Pickup:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 33\n      }\n    }, this.state.selected.pickup), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-subtitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 33\n      }\n    }, \"When:\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"info-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 33\n      }\n    }, this.state.selected.date.substring(0, 10) + \" \" + this.state.selected.time))) : null)));\n  }\n\n}\n\nexport default RideMap;","map":{"version":3,"sources":["C:/Users/Ricky/Projects/RideBuddiesDeploy/client/src/components/pages/map.component.js"],"names":["React","Component","axios","GoogleMap","Marker","InfoWindow","LoadScript","usePlacesAutocomplete","getGeocode","getLatLng","Combobox","ComboboxInput","ComboboxPopover","ComboboxList","ComboboxOption","mapContainerStyle","height","width","center","lat","lng","options","disableDefaultUI","zoomControl","libraries","url","PlacesAutocomplete","props","ready","value","suggestions","status","data","setValue","clearSuggestions","requestOptions","location","radius","address","results","panTo","err","console","log","e","target","map","id","description","Locate","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","compass","RideMap","constructor","onMapLoad","bind","state","selected","rides","currlat","currlong","currSelected","componentDidMount","get","then","response","setState","catch","error","setZoom","render","process","env","REACT_APP_GOOGLE_KEY","currRide","group_Name","seats","pickup","date","substring","time"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport axios from 'axios';\r\n\r\nimport {\r\n    GoogleMap,\r\n    Marker,\r\n    InfoWindow,\r\n    LoadScript,\r\n}from \"@react-google-maps/api\";\r\n\r\nimport usePlacesAutocomplete,{\r\n    getGeocode,\r\n    getLatLng,\r\n} from \"use-places-autocomplete\";\r\n\r\nimport {\r\n    Combobox,\r\n    ComboboxInput,\r\n    ComboboxPopover,\r\n    ComboboxList,\r\n    ComboboxOption,\r\n  } from \"@reach/combobox\";\r\n  import \"@reach/combobox/styles.css\";\r\n\r\n\r\nimport compass from \"../../img/compass.svg\";\r\n// height and width of the map\r\nconst mapContainerStyle = {\r\n    height: \"100vh\",\r\n    width: \"100vw\",\r\n}\r\n\r\n// Default center of the map\r\nconst center = {\r\n    lat:37.774929,\r\n    lng:-122.419418,\r\n}\r\n\r\nconst options = {\r\n    disableDefaultUI:true,\r\n    zoomControl:true,\r\n}\r\n\r\nconst libraries = [\"places\"];\r\nconst url= \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\";\r\n\r\n// Component for Search Bar for Map\r\nconst PlacesAutocomplete  = props =>{\r\n    const{\r\n        ready,\r\n        value,\r\n        suggestions:{status,data},\r\n        setValue,\r\n        clearSuggestions,\r\n    } = usePlacesAutocomplete({\r\n        requestOptions:{\r\n            location:{ lat:()=>37.774929,lng:()=>-122.419418},\r\n            radius:200*1000,\r\n        },\r\n    });\r\n    return (\r\n        <div className='search'>\r\n            {/* Wrapper for the search bar and Auto suggestion List */}\r\n            <Combobox onSelect={ async (address)=>{\r\n                setValue(address,false);\r\n                clearSuggestions();\r\n\r\n                try{\r\n                    const results = await getGeocode({address});\r\n                    const {lat, lng} = await getLatLng(results[0]);\r\n                    props.panTo({lat,lng});\r\n                }catch(err){\r\n                    console.log(err);\r\n                }\r\n                \r\n                }}>\r\n\r\n                {/* Search Bar */}\r\n                <ComboboxInput \r\n                    value={value} \r\n                    onChange={(e)=>{setValue(e.target.value);}} \r\n                    disabled={!ready}\r\n                    placeholder=\"Enter an address\"\r\n                    />\r\n                    {/* Auto Fill and Suggestion list */}\r\n                    <ComboboxPopover>\r\n                        <ComboboxList>\r\n                        {status===\"OK\" && data.map(({id,description})=>(\r\n                            <ComboboxOption key={id} value={description}/>\r\n                        ))}\r\n                       </ComboboxList>\r\n                    </ComboboxPopover>\r\n            </Combobox>\r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\n// Component for locating current location\r\nconst Locate  = props =>{\r\n   return <button className=\"locate\" onClick={()=>{\r\n       navigator.geolocation.getCurrentPosition((\r\n            position)=>{\r\n                props.panTo({\r\n                    lat: position.coords.latitude,\r\n                    lng:position.coords.longitude\r\n                });\r\n            }\r\n            ,()=>null\r\n        );\r\n   }}>\r\n            <img src={compass} alt=\"compass - locate me\" style={{width:\"40px\", height:\"40px\"}}></img>\r\n          </button>\r\n}\r\n\r\nclass RideMap extends Component{\r\n    \r\n    constructor(props){\r\n        super(props);\r\n        this.onMapLoad = this.onMapLoad.bind(this);\r\n        this.panTo = this.panTo.bind(this);\r\n        this.state = {\r\n                        selected:null,\r\n                        map:{},\r\n                        rides:[],\r\n                        currlat:null,\r\n                        currlong:null,\r\n                        currSelected:false,\r\n                    };\r\n    }\r\n\r\n    // Receiving all the rides avalible from the backend\r\n    componentDidMount(){\r\n        axios.get('/api/rides')\r\n            .then(response =>{this.setState({rides: response.data});\r\n            })\r\n            .catch((error)=> console.log(error));\r\n    }\r\n\r\n    // Load the map object\r\n    onMapLoad(map){\r\n        this.setState({\r\n            map:map\r\n        })\r\n    }\r\n\r\n  \r\n    // Function to zoom to a certain location on the map\r\n   panTo({lat,lng}){\r\n        this.state.map.panTo({lat,lng});\r\n        this.state.map.setZoom(15);\r\n        this.setState({currlat:lat,currlong:lng});\r\n   }\r\n    render(){\r\n        \r\n        return(\r\n            <div>\r\n                {/* Wrapper to load the scripts for the map */}\r\n                <LoadScript \r\n                    googleMapsApiKey={process.env.REACT_APP_GOOGLE_KEY}\r\n                    libraries={libraries}\r\n                >\r\n                    {/* Search bar and Current Location button */}\r\n                    <PlacesAutocomplete panTo={this.panTo}/>\r\n                    <Locate panTo={this.panTo}/>\r\n\r\n                    <h2>Rides Locations</h2>\r\n                    <GoogleMap mapContainerStyle={mapContainerStyle} \r\n                        zoom={8}\r\n                        center={center}\r\n                        options={options}\r\n                        onLoad={this.onMapLoad}\r\n                    >\r\n                        {/* Markers for all avalible Rides */}\r\n                        {this.state.rides.map(currRide => \r\n                            <Marker key={currRide.id} \r\n                                    position={{lat:currRide.lat,lng:currRide.lng}}\r\n                                    onClick={()=>this.setState({selected:currRide})}\r\n                                    />)}\r\n                        {/* Marker for current location if zoomed */}\r\n                        {this.state.currlat?\r\n                            <Marker key={1} \r\n                                   position={{lat:this.state.currlat,lng:this.state.currlong}}\r\n                                   icon={{url:url}}\r\n                                   onClick={()=>this.setState({currSelected:true})}\r\n                                    />:\"\"}\r\n\r\n                        {/* Info Window indicating your location when zoom */}\r\n                        {this.state.currSelected?(\r\n                        <InfoWindow \r\n                            position={{lat:this.state.currlat,lng:this.state.currlong}} \r\n                            onCloseClick={()=>this.setState({currSelected:false})}\r\n                            >\r\n                                <h4>You are here!</h4>\r\n                        </InfoWindow>):null}\r\n\r\n                        {/* Info Window for each rides */}\r\n                        {this.state.selected? \r\n                        (<InfoWindow \r\n                            position={{lat:this.state.selected.lat,lng:this.state.selected.lng}} \r\n                            onCloseClick={()=>this.setState({selected:null})}>\r\n                             <div className=\"info-box\">\r\n                                <p className=\"info-title\">{this.state.selected.group_Name}</p>\r\n                                <p className=\"info-subtitle\">Seats: {this.state.selected.seats}</p>\r\n                                <p className=\"info-subtitle\">Where:</p>\r\n                                <p className=\"info-text\">{this.state.selected.location}</p>\r\n                                <p className=\"info-subtitle\">Pickup:</p>\r\n                                <p className=\"info-text\">{this.state.selected.pickup}</p>\r\n                                <p className=\"info-subtitle\">When:</p>\r\n                                <p className=\"info-text\">{this.state.selected.date.substring(0,10) + \" \"+ this.state.selected.time}</p>\r\n                                \r\n                            </div>\r\n                        </InfoWindow>):null}\r\n                    </GoogleMap>\r\n                </LoadScript>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default RideMap;"]},"metadata":{},"sourceType":"module"}