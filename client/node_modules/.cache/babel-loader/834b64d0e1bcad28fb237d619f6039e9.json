{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import axios from'axios';import{connect}from\"react-redux\";var Ride=function Ride(props){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/rides/view/\"+props.rides._id},props.rides.group_Name)),/*#__PURE__*/React.createElement(\"td\",null,props.rides.host_email),/*#__PURE__*/React.createElement(\"td\",null,props.rides.location),/*#__PURE__*/React.createElement(\"td\",null,props.rides.date.substring(0,10)+\" \"+props.rides.time),/*#__PURE__*/React.createElement(\"td\",null,props.rides.seats),/*#__PURE__*/React.createElement(\"td\",null,props.user.email===props.rides.host_email?\"Yes\":\"No\"),/*#__PURE__*/React.createElement(\"td\",null,props.user.email===props.rides.host_email?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger btn-small mr-1\",onClick:function onClick(){props.deleteRides(props.rides._id);}},\"delete\"):\"\"));};var MyRidesList=/*#__PURE__*/function(_Component){_inherits(MyRidesList,_Component);var _super=_createSuper(MyRidesList);function MyRidesList(props){var _this;_classCallCheck(this,MyRidesList);_this=_super.call(this,props);var user=_this.props.auth.user;_this.deleteRides=_this.deleteRides.bind(_assertThisInitialized(_this));_this.state={rides:[],user:user};return _this;}_createClass(MyRidesList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var user=this.props.auth.user;axios.get('/rides/myRides').then(function(response){_this2.setState({rides:response.data.filter(function(rl){return rl.rider.some(function(riders){return riders.rider_email===user.email;});})});}).catch(function(error){return console.log(error);});}},{key:\"deleteRides\",value:function deleteRides(id){axios.delete('/rides/'+id,{data:{host_email:this.state.user.email}}).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});this.setState({rides:this.state.rides.filter(function(rl){return rl._id!==id;})});}},{key:\"rideList\",value:function rideList(){var _this3=this;return this.state.rides.map(function(currRide){return/*#__PURE__*/React.createElement(Ride,{rides:currRide,user:_this3.state.user,deleteRides:_this3.deleteRides,key:currRide._id});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Back to Home\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Your Rides\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Group Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Host Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Seats Available\"),/*#__PURE__*/React.createElement(\"th\",null,\"Host ?\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,this.rideList())));}}]);return MyRidesList;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps)(MyRidesList);","map":{"version":3,"sources":["C:/Users/Ricky/Documents/CS Stuff/Projects/RideBuddies/client/src/components/pages/my-rides.component.js"],"names":["React","Component","Link","axios","connect","Ride","props","rides","_id","group_Name","host_email","location","date","substring","time","seats","user","email","deleteRides","MyRidesList","auth","bind","state","get","then","response","setState","data","filter","rl","rider","some","riders","rider_email","catch","error","console","log","id","delete","res","err","map","currRide","rideList","mapStateToProps"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst Ride = props => (\r\n    <tr>\r\n        <td><Link to ={\"/rides/view/\"+props.rides._id}>{props.rides.group_Name}</Link></td>\r\n        <td>{props.rides.host_email}</td>\r\n        <td>{props.rides.location}</td>\r\n        <td>{props.rides.date.substring(0,10)+ \" \"+\r\n            props.rides.time}</td>\r\n        <td>{props.rides.seats}</td>\r\n        <td>{props.user.email===props.rides.host_email? \"Yes\": \"No\"}</td>\r\n        <td>\r\n            {props.user.email===props.rides.host_email?\r\n                <button className=\"btn btn-danger btn-small mr-1\" \r\n                    onClick={()=>{props.deleteRides(props.rides._id)}}>delete</button>: \"\"}\r\n        </td>\r\n    </tr>\r\n)\r\nclass MyRidesList extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        const {user} = this.props.auth;\r\n        this.deleteRides = this.deleteRides.bind(this);\r\n\r\n        this.state = {\r\n                        rides:[],\r\n                        user:user,\r\n                    };\r\n    }\r\n\r\n    componentDidMount(){\r\n        const {user} = this.props.auth;\r\n       \r\n        axios.get('/rides/myRides')\r\n            .then(response =>{                \r\n                this.setState({\r\n                    rides: response.data.filter(rl =>rl.rider.some(riders =>riders.rider_email===user.email))\r\n                })\r\n            })\r\n            .catch((error)=> console.log(error));\r\n    }\r\n\r\n    deleteRides(id){\r\n        \r\n        \r\n        axios.delete('/rides/'+id,{data:{host_email:this.state.user.email}})\r\n            .then(res => console.log(res.data))\r\n            .catch(err => console.log(err));\r\n\r\n        this.setState({\r\n            rides: this.state.rides.filter(rl => rl._id !==id)\r\n        })\r\n    }\r\n\r\n    rideList(){\r\n        return this.state.rides.map(currRide =>{\r\n            return <Ride rides = {currRide} user={this.state.user} deleteRides= {this.deleteRides} key={currRide._id}/>;\r\n\r\n        })\r\n    }\r\n\r\n    render(){\r\n        return(\r\n          <div>\r\n              <Link to=\"/\">Back to Home</Link>\r\n              <h3>Your Rides</h3>\r\n              <table className=\"table\">\r\n                <thead className=\"thead-light\">\r\n                    <tr>\r\n                        <th>Group Name</th>\r\n                        <th>Host Email</th>\r\n                        <th>Location</th>\r\n                        <th>Date</th>\r\n                        <th>Seats Available</th>\r\n                        <th>Host ?</th>\r\n                        <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {this.rideList()}\r\n                </tbody>\r\n              </table>\r\n              \r\n          </div>\r\n          \r\n        )\r\n    }\r\n}\r\n\r\nMyRidesList.propTypes = {\r\n    auth:PropTypes.object.isRequired,\r\n}\r\n\r\nconst mapStateToProps = state =>({\r\n    auth:state.auth,\r\n});\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n)(MyRidesList);"]},"metadata":{},"sourceType":"module"}