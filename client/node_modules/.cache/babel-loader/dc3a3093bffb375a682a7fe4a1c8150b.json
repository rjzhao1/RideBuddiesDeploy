{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ricky\\\\Documents\\\\CS Stuff\\\\Projects\\\\RideBuddies\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import axios from'axios';import{connect}from\"react-redux\";var Ride=function Ride(props){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,props.rides.group_Name),/*#__PURE__*/React.createElement(\"td\",null,props.rides.host_email),/*#__PURE__*/React.createElement(\"td\",null,props.rides.location),/*#__PURE__*/React.createElement(\"td\",null,props.rides.date.substring(0,10)+\" \"+props.rides.time),/*#__PURE__*/React.createElement(\"td\",null,props.rides.seats),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-small mr-1\",onClick:function onClick(){props.joinRide(props.rides._id);}},\"Join\"),props.user.email===props.rides.host_email?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger btn-small mr-1\",onClick:function onClick(){props.deleteRides(props.rides._id);}},\"delete\"):\"\"));};var RidesList=/*#__PURE__*/function(_Component){_inherits(RidesList,_Component);var _super=_createSuper(RidesList);function RidesList(props){var _this;_classCallCheck(this,RidesList);_this=_super.call(this,props);_this.deleteRides=_this.deleteRides.bind(_assertThisInitialized(_this));_this.joinRide=_this.joinRide.bind(_assertThisInitialized(_this));var user=_this.props.auth.user;_this.state={rides:[],user:user};return _this;}_createClass(RidesList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/rides').then(function(response){return _this2.setState({rides:response.data});}).catch(function(error){return console.log(error);});}},{key:\"deleteRides\",value:function deleteRides(id){axios.delete('/rides/'+id,{data:{host_email:this.state.user.email}}).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});this.setState({rides:this.state.rides.filter(function(rl){return rl._id!==id;})});}},{key:\"joinRide\",value:function joinRide(id){if(!this.props.auth.isAuthenticated){window.location='/login';}else{var rider={rider:this.state.user.username,rider_email:this.state.user.email};axios.post('/rides/join/'+id,rider).then(function(res){window.alert(res.data);window.location='/rides';}).catch(function(err){return window.alert(err.response.data);});}}},{key:\"rideList\",value:function rideList(){var rides=[];for(var i=0;i<this.state.rides.length;i++){rides.push(/*#__PURE__*/React.createElement(Ride,{rides:this.state.rides[i],user:this.state.user,deleteRides:this.deleteRides,joinRide:this.joinRide,key:this.state.rides[i]._id}));}return rides;}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Back to Home\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Rides Available\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Group Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Host Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Seats Available\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,this.rideList())));}}]);return RidesList;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps)(RidesList);","map":{"version":3,"sources":["C:/Users/Ricky/Documents/CS Stuff/Projects/RideBuddies/client/src/components/pages/list-rides.component.js"],"names":["React","Component","Link","axios","connect","Ride","props","rides","group_Name","host_email","location","date","substring","time","seats","joinRide","_id","user","email","deleteRides","RidesList","bind","auth","state","get","then","response","setState","data","catch","error","console","log","id","delete","res","err","filter","rl","isAuthenticated","window","rider","username","rider_email","post","alert","i","length","push","rideList","mapStateToProps"],"mappings":"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","sourcesContent":["import React,{Component} from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst Ride = props => (\r\n    <tr>\r\n        <td>{props.rides.group_Name}</td>\r\n        <td>{props.rides.host_email}</td>\r\n        <td>{props.rides.location}</td>\r\n        <td>{props.rides.date.substring(0,10)+ \" \"+\r\n            props.rides.time}</td>\r\n        <td>{props.rides.seats}</td>\r\n        <td>\r\n            <button \r\n                className=\"btn btn-primary btn-small mr-1\" \r\n                onClick={()=>{props.joinRide(props.rides._id)}}>Join</button>\r\n\r\n            {props.user.email===props.rides.host_email?\r\n            <button className=\"btn btn-danger btn-small mr-1\" \r\n                onClick={()=>{props.deleteRides(props.rides._id)}}>delete</button>: \"\"\r\n            }\r\n        </td>\r\n    </tr>\r\n)\r\nclass RidesList extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.deleteRides = this.deleteRides.bind(this);\r\n        this.joinRide = this.joinRide.bind(this);\r\n        const {user} = this.props.auth;\r\n        \r\n        this.state = {\r\n                        rides:[],\r\n                        user:user\r\n                    };\r\n    }\r\n\r\n    componentDidMount(){\r\n        axios.get('/rides')\r\n            .then(response =>this.setState({rides: response.data}))\r\n            .catch((error)=> console.log(error));\r\n    }\r\n\r\n    deleteRides(id){\r\n        \r\n        \r\n        axios.delete('/rides/'+id,{data:{host_email:this.state.user.email}})\r\n            .then(res => console.log(res.data))\r\n            .catch(err => console.log(err));\r\n\r\n        this.setState({\r\n            rides: this.state.rides.filter(rl => rl._id !==id)\r\n        })\r\n    }\r\n\r\n    joinRide(id){        \r\n        if(!this.props.auth.isAuthenticated){\r\n            window.location = '/login';\r\n        }else{\r\n            const rider = {\r\n                rider: this.state.user.username,\r\n                rider_email: this.state.user.email\r\n            }\r\n            axios.post('/rides/join/'+id,rider)\r\n                .then(res => {\r\n                    window.alert(res.data);\r\n                    window.location = '/rides';\r\n                })\r\n                .catch(err => window.alert(err.response.data));\r\n    \r\n        }\r\n\r\n\r\n    }\r\n\r\n    rideList(){\r\n        var rides = [];\r\n        for(var i=0;i<this.state.rides.length;i++){\r\n            rides.push(<Ride rides = {this.state.rides[i]} user={this.state.user} deleteRides= {this.deleteRides} joinRide = {this.joinRide} key={this.state.rides[i]._id}/>);\r\n        }\r\n        return rides;\r\n    }\r\n\r\n    render(){\r\n        return(\r\n          <div>\r\n              <Link to=\"/\">Back to Home</Link>\r\n              <h3>Rides Available</h3>\r\n              <table className=\"table\">\r\n                <thead className=\"thead-light\">\r\n                    <tr>\r\n                        <th>Group Name</th>\r\n                        <th>Host Email</th>\r\n                        <th>Location</th>\r\n                        <th>Date</th>\r\n                        <th>Seats Available</th>\r\n                        <th></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {this.rideList()}\r\n                    \r\n\r\n                </tbody>\r\n              </table>\r\n              \r\n          </div>\r\n          \r\n        )\r\n    }\r\n}\r\n\r\nRidesList.propTypes = {\r\n    auth:PropTypes.object.isRequired,\r\n}\r\n\r\nconst mapStateToProps = state =>({\r\n    auth:state.auth,\r\n});\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n)(RidesList);"]},"metadata":{},"sourceType":"module"}