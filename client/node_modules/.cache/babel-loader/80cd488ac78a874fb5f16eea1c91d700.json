{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import{connect}from'react-redux';var Ride=function Ride(props){return/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"td\",null,props.rides.group_Name),/*#__PURE__*/React.createElement(\"td\",null,props.rides.host_email),/*#__PURE__*/React.createElement(\"td\",null,props.rides.pickup),/*#__PURE__*/React.createElement(\"td\",null,props.rides.location),/*#__PURE__*/React.createElement(\"td\",null,props.rides.date.substring(0,10)+' '+props.rides.time),/*#__PURE__*/React.createElement(\"td\",null,props.rides.seats),/*#__PURE__*/React.createElement(\"td\",null,props.user.email===props.rides.host_email?/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger btn-small mr-1\",onClick:function onClick(){props.deleteRides(props.rides._id);}},\"delete\"):/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-small mr-1\",onClick:function onClick(){props.joinRide(props.rides._id);}},\"Join\")));};var RidesList=/*#__PURE__*/function(_Component){_inherits(RidesList,_Component);var _super=_createSuper(RidesList);function RidesList(props){var _this;_classCallCheck(this,RidesList);_this=_super.call(this,props);_this.deleteRides=_this.deleteRides.bind(_assertThisInitialized(_this));_this.joinRide=_this.joinRide.bind(_assertThisInitialized(_this));_this.rideList=_this.rideList.bind(_assertThisInitialized(_this));var user=_this.props.auth.user;_this.state={rides:[],user:user};return _this;}// Getting all avalible rides from database\n_createClass(RidesList,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/api/rides').then(function(response){_this2.setState({rides:response.data});}).catch(function(error){return console.log(error);});}// Function to delete a ride\n},{key:\"deleteRides\",value:function deleteRides(id){axios.delete('/api/rides/'+id,{data:{host_email:this.state.user.email}}).then(function(res){return console.log(res.data);}).catch(function(err){return console.log(err);});this.setState({rides:this.state.rides.filter(function(rl){return rl._id!==id;})});}// Fuction to join a ride\n},{key:\"joinRide\",value:function joinRide(id){if(!this.props.auth.isAuthenticated){window.location='/login';}else{var passenger={passenger_name:this.state.user.username,passenger_email:this.state.user.email};axios.post('/api/rides/join/'+id,passenger).then(function(res){window.alert(res.data);window.location='/rides/myRides';}).catch(function(err){return window.alert(err.response.data);});}}// Function that maps each ride to a Ride Element to display \n// on the page\n},{key:\"rideList\",value:function rideList(){var _this3=this;return this.state.rides.map(function(currRide){if(currRide){return/*#__PURE__*/React.createElement(Ride,{rides:currRide,user:_this3.state.user,deleteRides:_this3.deleteRides,joinRide:_this3.joinRide,key:currRide._id});}else{return'';}});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"Back to Home\"),/*#__PURE__*/React.createElement(\"h3\",null,\"Rides Available\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Group Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Host Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Pickup\"),/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Seats Available\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,this.rideList())));}}]);return RidesList;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps)(RidesList);","map":{"version":3,"sources":["C:/Users/Ricky/Projects/RideBuddiesDeploy/client/src/components/pages/list-rides.component.js"],"names":["React","Component","Link","axios","connect","Ride","props","rides","group_Name","host_email","pickup","location","date","substring","time","seats","user","email","deleteRides","_id","joinRide","RidesList","bind","rideList","auth","state","get","then","response","setState","data","catch","error","console","log","id","delete","res","err","filter","rl","isAuthenticated","window","passenger","passenger_name","username","passenger_email","post","alert","map","currRide","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nconst Ride = (props) => (\r\n\t<tr>\r\n\t\t<td>{props.rides.group_Name}</td>\r\n\t\t<td>{props.rides.host_email}</td>\r\n\t\t<td>{props.rides.pickup}</td>\r\n\t\t<td>{props.rides.location}</td>\r\n\t\t<td>{props.rides.date.substring(0, 10) + ' ' + props.rides.time}</td>\r\n\t\t<td>{props.rides.seats}</td>\r\n\t\t{/* Shows delete button if user is host, otherwise show join button */}\r\n\t\t<td>\r\n\t\t\t{props.user.email === props.rides.host_email ? (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-danger btn-small mr-1\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tprops.deleteRides(props.rides._id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tdelete\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-primary btn-small mr-1\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tprops.joinRide(props.rides._id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tJoin\r\n\t\t\t\t</button>\r\n\t\t\t)}\r\n\t\t</td>\r\n\t</tr>\r\n);\r\nclass RidesList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.deleteRides = this.deleteRides.bind(this);\r\n\t\tthis.joinRide = this.joinRide.bind(this);\r\n\t\tthis.rideList = this.rideList.bind(this);\r\n\t\tconst { user } = this.props.auth;\r\n\r\n\t\tthis.state = {\r\n\t\t\trides: [],\r\n\t\t\tuser: user,\r\n\t\t};\r\n\t}\r\n\r\n\t// Getting all avalible rides from database\r\n\tcomponentDidMount() {\r\n\t\taxios\r\n\t\t\t.get('/api/rides')\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.setState({ rides: response.data });\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.log(error));\r\n\t}\r\n\r\n\t// Function to delete a ride\r\n\tdeleteRides(id) {\r\n\t\taxios\r\n\t\t\t.delete('/api/rides/' + id, {\r\n\t\t\t\tdata: { host_email: this.state.user.email },\r\n\t\t\t})\r\n\t\t\t.then((res) => console.log(res.data))\r\n\t\t\t.catch((err) => console.log(err));\r\n\r\n\t\tthis.setState({\r\n\t\t\trides: this.state.rides.filter((rl) => rl._id !== id),\r\n\t\t});\r\n\t}\r\n\t// Fuction to join a ride\r\n\tjoinRide(id) {\r\n\t\tif (!this.props.auth.isAuthenticated) {\r\n\t\t\twindow.location = '/login';\r\n\t\t} else {\r\n\t\t\tconst passenger = {\r\n\t\t\t\tpassenger_name: this.state.user.username,\r\n\t\t\t\tpassenger_email: this.state.user.email,\r\n\t\t\t};\r\n\t\t\taxios\r\n\t\t\t\t.post('/api/rides/join/' + id, passenger)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\twindow.alert(res.data);\r\n\t\t\t\t\twindow.location = '/rides/myRides';\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => window.alert(err.response.data));\r\n\t\t}\r\n\t}\r\n\r\n\t// Function that maps each ride to a Ride Element to display \r\n\t// on the page\r\n\trideList() {\r\n\t\treturn this.state.rides.map((currRide) => {\r\n\t\t\tif (currRide) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<Ride\r\n\t\t\t\t\t\trides={currRide}\r\n\t\t\t\t\t\tuser={this.state.user}\r\n\t\t\t\t\t\tdeleteRides={this.deleteRides}\r\n\t\t\t\t\t\tjoinRide={this.joinRide}\r\n\t\t\t\t\t\tkey={currRide._id}\r\n\t\t\t\t\t/>\r\n\t\t\t\t);\r\n\t\t\t} else {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Link to=\"/\">Back to Home</Link>\r\n\t\t\t\t<h3>Rides Available</h3>\r\n\t\t\t\t<table className=\"table\">\r\n\t\t\t\t\t<thead className=\"thead-light\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Group Name</th>\r\n\t\t\t\t\t\t\t<th>Host Email</th>\r\n\t\t\t\t\t\t\t<th>Pickup</th>\r\n\t\t\t\t\t\t\t<th>Location</th>\r\n\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t<th>Seats Available</th>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody>{this.rideList()}</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nRidesList.propTypes = {\r\n\tauth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tauth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps)(RidesList);\r\n"]},"metadata":{},"sourceType":"module"}