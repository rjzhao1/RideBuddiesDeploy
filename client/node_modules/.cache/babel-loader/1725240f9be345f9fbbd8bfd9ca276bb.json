{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ricky\\\\Projects\\\\RideBuddiesDeploy\\\\client\\\\src\\\\components\\\\pages\\\\my-rides.component.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux'; // Custom Ride Element that display all the information of \n// A ride on a row of a table\n\nconst Ride = props => /*#__PURE__*/React.createElement(\"tr\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 2\n  }\n}, /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 11,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(Link, {\n  to: '/rides/view/' + props.rides._id,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 4\n  }\n}, props.rides.group_Name)), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 3\n  }\n}, props.rides.host_email), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 3\n  }\n}, props.rides.pickup), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 3\n  }\n}, props.rides.location), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 3\n  }\n}, props.rides.date.substring(0, 10) + ' ' + props.rides.time), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 3\n  }\n}, props.rides.seats), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 3\n  }\n}, props.user.email === props.rides.host_email ? 'Yes' : 'No'), /*#__PURE__*/React.createElement(\"td\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 3\n  }\n}, props.user.email === props.rides.host_email ? /*#__PURE__*/React.createElement(\"button\", {\n  className: \"btn btn-danger btn-small mr-1\",\n  onClick: () => {\n    props.deleteRides(props.rides._id);\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }\n}, \"delete\") : ''));\n\nclass MyRidesList extends Component {\n  constructor(props) {\n    super(props);\n    const {\n      user\n    } = this.props.auth;\n    this.deleteRides = this.deleteRides.bind(this);\n    this.state = {\n      rides: [],\n      user: user\n    };\n  } // Take the list of rides and filter the rides the users\n  // are in \n\n\n  componentDidMount() {\n    const {\n      user\n    } = this.props.auth;\n    axios.get('/api/rides/myRides').then(response => {\n      this.setState({\n        rides: response.data.filter(rl => rl.passenger.some(passengers => passengers.passenger_email === user.email) || rl.host_email === user.email)\n      });\n    }).catch(error => console.log(error));\n  } // Function to delete rides\n\n\n  deleteRides(id) {\n    axios.delete('/api/rides/' + id, {\n      data: {\n        host_email: this.state.user.email\n      }\n    }).then(res => console.log(res.data)).catch(err => console.log(err));\n    this.setState({\n      rides: this.state.rides.filter(rl => rl._id !== id)\n    });\n  } // Map each rides to a Ride element\n\n\n  rideList() {\n    return this.state.rides.map(currRide => {\n      return /*#__PURE__*/React.createElement(Ride, {\n        rides: currRide,\n        user: this.state.user,\n        deleteRides: this.deleteRides,\n        key: currRide._id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 5\n        }\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }\n    }, \"Back to Home\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 5\n      }\n    }, \"Your Rides\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      className: \"thead-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 8\n      }\n    }, \"Group Name\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 8\n      }\n    }, \"Host Email\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 8\n      }\n    }, \"Pickup\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 8\n      }\n    }, \"Location\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 8\n      }\n    }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 8\n      }\n    }, \"Seats Available\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 8\n      }\n    }, \"Host ?\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 8\n      }\n    }))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 6\n      }\n    }, this.rideList())));\n  }\n\n}\n\nMyRidesList.propTypes = {\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps)(MyRidesList);","map":{"version":3,"sources":["C:/Users/Ricky/Projects/RideBuddiesDeploy/client/src/components/pages/my-rides.component.js"],"names":["React","Component","Link","axios","PropTypes","connect","Ride","props","rides","_id","group_Name","host_email","pickup","location","date","substring","time","seats","user","email","deleteRides","MyRidesList","constructor","auth","bind","state","componentDidMount","get","then","response","setState","data","filter","rl","passenger","some","passengers","passenger_email","catch","error","console","log","id","delete","res","err","rideList","map","currRide","render","propTypes","object","isRequired","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\n// Custom Ride Element that display all the information of \r\n// A ride on a row of a table\r\nconst Ride = (props) => (\r\n\t<tr>\r\n\t\t<td>\r\n\t\t\t<Link to={'/rides/view/' + props.rides._id}>\r\n\t\t\t\t{props.rides.group_Name}\r\n\t\t\t</Link>\r\n\t\t</td>\r\n\t\t<td>{props.rides.host_email}</td>\r\n\t\t<td>{props.rides.pickup}</td>\r\n\t\t<td>{props.rides.location}</td>\r\n\t\t<td>{props.rides.date.substring(0, 10) + ' ' + props.rides.time}</td>\r\n\t\t<td>{props.rides.seats}</td>\r\n\t\t<td>{props.user.email === props.rides.host_email ? 'Yes' : 'No'}</td>\r\n\t\t{/* if the user is the hows show a delete button */}\r\n\t\t<td>\r\n\t\t\t{props.user.email === props.rides.host_email ? (\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName=\"btn btn-danger btn-small mr-1\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tprops.deleteRides(props.rides._id);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tdelete\r\n\t\t\t\t</button>\r\n\t\t\t) : (\r\n\t\t\t\t''\r\n\t\t\t)}\r\n\t\t</td>\r\n\t</tr>\r\n);\r\n\r\nclass MyRidesList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tconst { user } = this.props.auth;\r\n\t\tthis.deleteRides = this.deleteRides.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\trides: [],\r\n\t\t\tuser: user,\r\n\t\t};\r\n\t}\r\n\r\n\t// Take the list of rides and filter the rides the users\r\n\t// are in \r\n\tcomponentDidMount() {\r\n\t\tconst { user } = this.props.auth;\r\n\t\r\n\t\taxios\r\n\t\t\t.get('/api/rides/myRides')\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\trides: response.data.filter(\r\n\t\t\t\t\t\t(rl) =>\r\n\t\t\t\t\t\t\trl.passenger.some(\r\n\t\t\t\t\t\t\t\t(passengers) => passengers.passenger_email === user.email\r\n\t\t\t\t\t\t\t) || rl.host_email === user.email\r\n\t\t\t\t\t),\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((error) => console.log(error));\r\n\t}\r\n\r\n\t// Function to delete rides\r\n\tdeleteRides(id) {\r\n\t\taxios\r\n\t\t\t.delete('/api/rides/' + id, {\r\n\t\t\t\tdata: { host_email: this.state.user.email },\r\n\t\t\t})\r\n\t\t\t.then((res) => console.log(res.data))\r\n\t\t\t.catch((err) => console.log(err));\r\n\r\n\t\tthis.setState({\r\n\t\t\trides: this.state.rides.filter((rl) => rl._id !== id),\r\n\t\t});\r\n\t}\r\n\r\n\t// Map each rides to a Ride element\r\n\trideList() {\r\n\t\treturn this.state.rides.map((currRide) => {\r\n\t\t\treturn (\r\n\t\t\t\t<Ride\r\n\t\t\t\t\trides={currRide}\r\n\t\t\t\t\tuser={this.state.user}\r\n\t\t\t\t\tdeleteRides={this.deleteRides}\r\n\t\t\t\t\tkey={currRide._id}\r\n\t\t\t\t/>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<Link to=\"/\">Back to Home</Link>\r\n\t\t\t\t<h3>Your Rides</h3>\r\n\t\t\t\t<table className=\"table\">\r\n\t\t\t\t\t{/* Heading of the table */}\r\n\t\t\t\t\t<thead className=\"thead-light\">\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t<th>Group Name</th>\r\n\t\t\t\t\t\t\t<th>Host Email</th>\r\n\t\t\t\t\t\t\t<th>Pickup</th>\r\n\t\t\t\t\t\t\t<th>Location</th>\r\n\t\t\t\t\t\t\t<th>Date</th>\r\n\t\t\t\t\t\t\t<th>Seats Available</th>\r\n\t\t\t\t\t\t\t<th>Host ?</th>\r\n\t\t\t\t\t\t\t<th></th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t{/* Body of table */}\r\n\t\t\t\t\t<tbody>{this.rideList()}</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nMyRidesList.propTypes = {\r\n\tauth: PropTypes.object.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tauth: state.auth,\r\n});\r\n\r\nexport default connect(mapStateToProps)(MyRidesList);\r\n"]},"metadata":{},"sourceType":"module"}