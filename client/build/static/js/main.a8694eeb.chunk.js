(this["webpackJsonpmern-personal-project"]=this["webpackJsonpmern-personal-project"]||[]).push([[0],{125:function(e,t,a){e.exports=a.p+"static/media/landing.22b51f76.jpg"},126:function(e,t,a){e.exports=a.p+"static/media/dashboard.6ed11d8e.jpg"},140:function(e,t,a){e.exports=a(281)},163:function(e,t,a){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),s=a.n(l),o=a(8),i=a(12),c=a(62),u=a.n(c),m=a(18),d=a.n(m),h=function(e){e?d.a.defaults.headers.common.Authorization=e:delete d.a.defaults.headers.common.Authorization},p=function(e){return{type:"SET_CURRENT_USER",payload:e}},b=function(){return function(e){localStorage.removeItem("jwtToken"),h(!1),e(p({}))}},E=(a(163),a(164),a(10)),g=a(42),v=a(124),f=a(59),y=a(169),N={isAuthenticated:!1,user:{},loading:!1},j={},O=Object(g.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(f.a)(Object(f.a)({},e),{},{isAuthenticated:!y(t.payload),user:t.payload});case"USER_LOADING":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),w=[v.a],k=Object(g.e)(O,{},Object(g.d)(g.a.apply(void 0,w))),C=a(14),R=a(15),x=a(17),S=a(16),_=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg"},r.a.createElement(o.b,{to:"/",className:"navbar-brand"},"RideBuddies"),r.a.createElement("div",{className:"collpase navbar-collapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/rides",className:"nav-link"},"Find Rides")),e?r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/rides/add",className:"nav-link"},"Create Rides")):"",e?r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/rides/myRides",className:"nav-link"},"My Rides")):""),r.a.createElement("ul",{className:"navbar-nav navbar-right"},r.a.createElement("li",null,e?r.a.createElement("button",{onClick:this.onLogoutClick,className:"btn btn-danger btn-small btn-nav navbar-right"},"Log out"):r.a.createElement(o.b,{to:"/login",type:"button",className:"btn btn-primary btn-small btn-nav navbar-right"},"Log In")))))}}]),a}(n.Component),L=Object(E.b)((function(e){return{auth:e.auth}}),{logoutUser:b})(_),D=a(125),T=a.n(D),A=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).state={},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e={width:"140px",letterSpacing:"1.5px",borderRadius:"5px",margin:"5px"};return r.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(T.a,")")}},r.a.createElement("div",{className:"container text-center p-5"},r.a.createElement("h1",null,"Welcome"),r.a.createElement("h5",null,r.a.createElement("bold",null,"Welcome to RideBuddies. Here you can organize and find a rides that you need.")),r.a.createElement("p",null,r.a.createElement(o.b,{to:"/register",style:e,className:"btn btn-primary my-2"},"Register"),r.a.createElement(o.b,{to:"/login",style:e,className:"btn btn-secondary my-2"},"Login"))))}}]),a}(n.Component),U=Object(E.b)((function(e){return{auth:e.auth}}))(A),G=a(48),H=a(5),I=a.n(H),M=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={username:"",email:"",password:"",errors:{}},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Sign In")),r.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",r.a.createElement(o.b,{to:"/register"},"Sign Up"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,className:I()("form-control",{invalid:e.email||e.emailnotfound}),id:"email",type:"text"}),r.a.createElement("p",{className:"text-danger"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,className:I()("form-control",{invalid:e.password||e.passwordincorrect}),id:"password",type:"password"}),r.a.createElement("p",{className:"text-danger"},e.password,e.passwordincorrect)),r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"5px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"form-group btn btn-primary btn-block"},"Log In"),r.a.createElement(o.b,{to:"/"},"Back to Home Page")))))}}]),a}(n.Component),B=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:function(e){return function(t){d.a.post("/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),h(a);var n=u()(a);t(p(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e.response.data})}))}}})(M),P=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(C.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(G.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={username:"",email:"",password:"",password2:"",errors:{}},e}return Object(R.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(o.b,{to:"/login"},"Log in"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,className:I()("form-control",{invalid:e.username}),id:"username",type:"text"}),r.a.createElement("p",{className:"text-danger"},e.username)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,className:I()("form-control",{invalid:e.email}),id:"email",type:"text"}),r.a.createElement("p",{className:"text-danger"},e.email)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,className:I()("form-control",{invalid:e.password}),id:"password",type:"password"}),r.a.createElement("p",{className:"text-danger"},e.password)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,className:I()("form-control",{invalid:e.password2}),id:"password2",type:"password"}),r.a.createElement("p",{className:"text-danger"},e.password2)),r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"5px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"form-group btn btn-primary btn-block"},"Sign up")))))}}]),a}(n.Component),W=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){d.a.post("/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(i.f)(P)),Y=a(139),z=Object(E.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(Y.a)(e,["component","auth"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))})),J=a(126),F=a.n(J),V=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(R.a)(a,[{key:"render",value:function(){var e=this.props.auth.user,t={width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginLeft:"1rem"};return r.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(F.a,")")}},r.a.createElement("div",{className:"container text-center p-5"},r.a.createElement("h1",null,"Hey ",e.username.split(" ")[0]),r.a.createElement("p",{className:"lead text-muted"},"You are logged in RideBuddies! Start looking for Rides Today!"),r.a.createElement("div",{className:"col"},r.a.createElement(o.b,{to:"/rides",style:t,className:"btn btn-primary"},"Find Rides"),r.a.createElement(o.b,{to:"/rides/myRides",style:t,className:"btn btn-secondary"},"My Rides")),r.a.createElement("button",{style:t,onClick:this.onLogoutClick,className:"btn btn-danger"},"Logout")))}}]),a}(n.Component),q=Object(E.b)((function(e){return{auth:e.auth}}),{logoutUser:b})(V),K=a(20),Q=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.rides.group_Name),r.a.createElement("td",null,e.rides.host_email),r.a.createElement("td",null,e.rides.location),r.a.createElement("td",null,e.rides.date.substring(0,10)+" "+e.rides.time),r.a.createElement("td",null,e.rides.seats),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-primary btn-small mr-1",onClick:function(){e.joinRide(e.rides._id)}},"Join"),e.user.email===e.rides.host_email?r.a.createElement("button",{className:"btn btn-danger btn-small mr-1",onClick:function(){e.deleteRides(e.rides._id)}},"delete"):""))},X=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;Object(C.a)(this,a),(n=t.call(this,e)).deleteRides=n.deleteRides.bind(Object(K.a)(n)),n.joinRide=n.joinRide.bind(Object(K.a)(n)),n.rideList=n.rideList.bind(Object(K.a)(n));var r=n.props.auth.user;return n.state={rides:[],user:r},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("/rides").then((function(t){e.setState({rides:t.data})})).catch((function(e){return console.log(e)}))}},{key:"deleteRides",value:function(e){d.a.delete("/rides/"+e,{data:{host_email:this.state.user.email}}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),this.setState({rides:this.state.rides.filter((function(t){return t._id!==e}))})}},{key:"joinRide",value:function(e){if(this.props.auth.isAuthenticated){var t={rider:this.state.user.username,rider_email:this.state.user.email};d.a.post("/rides/join/"+e,t).then((function(e){window.alert(e.data),window.location="/rides"})).catch((function(e){return window.alert(e.response.data)}))}else window.location="/login"}},{key:"rideList",value:function(){var e=this;return this.state.rides.map((function(t){return t?r.a.createElement(Q,{rides:t,user:e.state.user,deleteRides:e.deleteRides,joinRide:e.joinRide,key:t._id}):""}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/"},"Back to Home"),r.a.createElement("h3",null,"Rides Available"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Group Name"),r.a.createElement("th",null,"Host Email"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Seats Available"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.rideList())))}}]),a}(n.Component),Z=Object(E.b)((function(e){return{auth:e.auth}}))(X),$=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.b,{to:"/rides/view/"+e.rides._id},e.rides.group_Name)),r.a.createElement("td",null,e.rides.host_email),r.a.createElement("td",null,e.rides.location),r.a.createElement("td",null,e.rides.date.substring(0,10)+" "+e.rides.time),r.a.createElement("td",null,e.rides.seats),r.a.createElement("td",null,e.user.email===e.rides.host_email?"Yes":"No"),r.a.createElement("td",null,e.user.email===e.rides.host_email?r.a.createElement("button",{className:"btn btn-danger btn-small mr-1",onClick:function(){e.deleteRides(e.rides._id)}},"delete"):""))},ee=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;Object(C.a)(this,a);var r=(n=t.call(this,e)).props.auth.user;return n.deleteRides=n.deleteRides.bind(Object(K.a)(n)),n.state={rides:[],user:r},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.user;d.a.get("/rides/myRides").then((function(a){e.setState({rides:a.data.filter((function(e){return e.rider.some((function(e){return e.rider_email===t.email}))}))})})).catch((function(e){return console.log(e)}))}},{key:"deleteRides",value:function(e){d.a.delete("/rides/"+e,{data:{host_email:this.state.user.email}}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),this.setState({rides:this.state.rides.filter((function(t){return t._id!==e}))})}},{key:"rideList",value:function(){var e=this;return this.state.rides.map((function(t){return r.a.createElement($,{rides:t,user:e.state.user,deleteRides:e.deleteRides,key:t._id})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/"},"Back to Home"),r.a.createElement("h3",null,"Your Rides"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Group Name"),r.a.createElement("th",null,"Host Email"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Seats Available"),r.a.createElement("th",null,"Host ?"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.rideList())))}}]),a}(n.Component),te=Object(E.b)((function(e){return{auth:e.auth}}))(ee),ae=a(127),ne=a.n(ae),re=a(287),le=(a(171),a(172),function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(C.a)(this,a),(n=t.call(this,e)).onChangeGroupName=n.onChangeGroupName.bind(Object(K.a)(n)),n.onChangeSeats=n.onChangeSeats.bind(Object(K.a)(n)),n.onChangeLocation=n.onChangeLocation.bind(Object(K.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(K.a)(n)),n.onChangeTime=n.onChangeTime.bind(Object(K.a)(n)),n.onSubmit=n.onSubmit.bind(Object(K.a)(n)),n.state={seats:0,group_Name:"",location:"",date:new Date,time:"",errors:{}},n}return Object(R.a)(a,[{key:"onChangeSeats",value:function(e){this.setState({seats:e.target.value})}},{key:"onChangeGroupName",value:function(e){this.setState({group_Name:e.target.value})}},{key:"onChangeLocation",value:function(e){this.setState({location:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onChangeTime",value:function(e,t){this.setState({time:t})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.auth.user;console.log(a);var n={host_email:a.email,seats:this.state.seats,group_Name:this.state.group_Name,location:this.state.location,date:this.state.date,time:this.state.time};d.a.post("/rides/add",n).then((function(){return window.location="/rides"})).catch((function(e){return t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h3",null,"You are on the Create Exercises Component!"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Group Name: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.group_Name,onChange:this.onChangeGroupName}),r.a.createElement("p",{className:"text-danger"},e.group_Name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Seats: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.seats,onChange:this.onChangeSeats}),r.a.createElement("p",{className:"text-danger"},e.seats,e.noSeats)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"destination: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.location,onChange:this.onChangeLocation}),r.a.createElement("p",{className:"text-danger"},e.location)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Date: "),r.a.createElement("div",null,r.a.createElement(ne.a,{selected:this.state.date,onChange:this.onChangeDate})),r.a.createElement("p",{className:"text-danger"},e.date)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Time: "),r.a.createElement("div",null,r.a.createElement(re.a,{use12Hours:!0,format:"h:mm A",selected:this.state.time,onChange:this.onChangeTime}),r.a.createElement("p",{className:"text-danger"},e.time))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Create Ride",className:"btn btn-primary"}))))}}]),a}(n.Component)),se=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}))(le),oe=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"col-md-2"},r.a.createElement("small",null,e.rider.rider)),r.a.createElement("h5",{className:"col-sm-3"},r.a.createElement("small",null,e.rider.rider_email)))},ie=function(e){Object(x.a)(a,e);var t=Object(S.a)(a);function a(e){var n;Object(C.a)(this,a);var r=(n=t.call(this,e)).props.auth.user;return n.state={rides:[],rider:[],user:r},n}return Object(R.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;d.a.get("/rides/view/"+t).then((function(t){e.setState({rides:t.data,rider:t.data.rider})})).catch((function(e){return console.log(e)}))}},{key:"riderList",value:function(){return this.state.rider.map((function(e){return r.a.createElement(oe,{rider:e,key:e._id})}))}},{key:"render",value:function(){return console.log(this.state.rider),r.a.createElement("div",{className:"container",style:{minHeight:"00px"}},r.a.createElement(o.b,{to:"/"},"Back to Home"),r.a.createElement("div",{className:"card mb-4 box-shadow"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h2",null,this.state.rides.group_Name),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"col-md-2"},"Location: "),r.a.createElement("h5",{className:"col-md-8"},this.state.rides.location)),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"col-md-2"},"Departure Date:"),r.a.createElement("h5",{className:"col-md-3"},this.state.rides.date?this.state.rides.date.substring(0,10):"",this.state.rides.time))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",null,"Riders"),this.riderList())))}}]),a}(n.Component),ce=Object(E.b)((function(e){return{auth:e.auth}}))(ie);if(localStorage.jwtToken){var ue=localStorage.jwtToken;h(ue);var me=u()(ue);k.dispatch(p(me));var de=Date.now()/1e3;me.exp<de&&(k.dispatch(b()),window.location.href="./login")}var he=function(){return r.a.createElement(E.a,{store:k},r.a.createElement(o.a,null,r.a.createElement(L,null),r.a.createElement(i.b,{path:"/",exact:!0,component:U}),r.a.createElement(i.b,{path:"/register",exact:!0,component:W}),r.a.createElement(i.b,{path:"/login",exact:!0,component:B}),r.a.createElement(i.b,{path:"/rides",exact:!0,component:Z}),r.a.createElement(i.b,{path:"/rides/view/:id",exact:!0,component:ce}),r.a.createElement(z,{path:"/rides/add",exact:!0,component:se}),r.a.createElement(z,{path:"/rides/myRides",exact:!0,component:te}),r.a.createElement(z,{exact:!0,path:"/dashboard",component:q})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(he,null)),document.getElementById("root"))}},[[140,1,2]]]);
//# sourceMappingURL=main.a8694eeb.chunk.js.map