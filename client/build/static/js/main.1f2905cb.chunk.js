(this["webpackJsonpmern-personal-project"]=this["webpackJsonpmern-personal-project"]||[]).push([[0],{133:function(e,t,a){e.exports=a.p+"static/media/landing.22b51f76.jpg"},134:function(e,t,a){e.exports=a.p+"static/media/dashboard.6ed11d8e.jpg"},147:function(e,t,a){e.exports=a.p+"static/media/compass.d0ced76b.svg"},150:function(e,t,a){e.exports=a(292)},173:function(e,t,a){},292:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),s=a.n(l),o=a(7),i=a(13),c=a(69),u=a.n(c),m=a(18),d=a.n(m),p=function(e){e?d.a.defaults.headers.common.Authorization=e:delete d.a.defaults.headers.common.Authorization},h=function(e){return function(t){d.a.post("/api/users/login",e).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),p(a);var n=u()(a);t(b(n))})).catch((function(e){return t({type:"GET_ERRORS",payload:e.response.data})}))}},b=function(e){return{type:"SET_CURRENT_USER",payload:e}},g=function(){return function(e){localStorage.removeItem("jwtToken"),p(!1),e(b({}))}},E=(a(173),a(174),a(11)),v=a(46),f=a(132),N=a(66),y=a(179),O={isAuthenticated:!1,user:{},loading:!1},k={},j=Object(v.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(N.a)(Object(N.a)({},e),{},{isAuthenticated:!y(t.payload),user:t.payload});case"USER_LOADING":return Object(N.a)(Object(N.a)({},e),{},{loading:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}}}),C=[f.a],S=Object(v.e)(j,{},Object(v.d)(v.a.apply(void 0,C))),w=a(14),x=a(15),R=a(17),_=a(16),L=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e.logInDemo=function(t){t.preventDefault();e.props.loginUser({email:"JohnDoe@email.com",password:"12345678"})},e}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.auth.isAuthenticated;return r.a.createElement("nav",{className:"navbar navbar-dark bg-dark navbar-expand-lg"},r.a.createElement(o.b,{to:"/",className:"navbar-brand"},"RideBuddies"),r.a.createElement("div",{className:"collpase navbar-collapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/rides",className:"nav-link"},"Find Rides")),e?r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/rides/add",className:"nav-link"},"Create Rides")):"",e?r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/rides/myRides",className:"nav-link"},"My Rides")):"",r.a.createElement("li",{className:"navbar-item"},r.a.createElement(o.b,{to:"/map",className:"nav-link"},"Ride Map"))),r.a.createElement("ul",{className:"navbar-nav navbar-right"},r.a.createElement("li",null,e?r.a.createElement(o.b,{to:"/",onClick:this.onLogoutClick,className:"btn btn-danger btn-small btn-nav navbar-right"},"Log out"):r.a.createElement(o.b,{to:"/login",type:"button",className:"btn btn-primary btn-small btn-nav navbar-right",style:{marginRight:"1em"}},"Log In"),e?"":r.a.createElement(o.b,{to:"/",onClick:this.logInDemo,className:"btn btn-danger btn-small btn-nav navbar-right"},"Demo")))))}}]),a}(n.Component),T=Object(E.b)((function(e){return{auth:e.auth}}),{logoutUser:g,loginUser:h})(L),D=a(133),A=a.n(D),P=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).state={},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"render",value:function(){var e={width:"140px",letterSpacing:"1.5px",borderRadius:"5px",margin:"5px"};return r.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(A.a,")")}},r.a.createElement("div",{className:"container text-center p-5"},r.a.createElement("h1",null,"Welcome"),r.a.createElement("h5",null,"Welcome to RideBuddies. Here you can organize and find a rides that you need."),r.a.createElement("p",null,r.a.createElement(o.b,{to:"/register",style:e,className:"btn btn-secondary my-2"},"Register"),r.a.createElement(o.b,{to:"/login",style:e,className:"btn btn-primary my-2"},"Login"))))}}]),a}(n.Component),U=Object(E.b)((function(e){return{auth:e.auth}}))(P),M=a(53),G=a(5),H=a.n(G),I=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(M.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};e.props.loginUser(a)},e.state={username:"",email:"",password:"",errors:{}},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Sign In")),r.a.createElement("p",{className:"grey-text text-darken-1"},"Don't have an account? ",r.a.createElement(o.b,{to:"/register"},"Sign Up"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,className:H()("form-control",{invalid:e.email||e.emailnotfound}),id:"email",type:"text"}),r.a.createElement("p",{className:"text-danger"},e.email,e.emailnotfound)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,className:H()("form-control",{invalid:e.password||e.passwordincorrect}),id:"password",type:"password"}),r.a.createElement("p",{className:"text-danger"},e.password,e.passwordincorrect)),r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"5px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"form-group btn btn-primary btn-block"},"Log In"),r.a.createElement(o.b,{to:"/"},"Back to Home Page")))))}}]),a}(n.Component),K=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{loginUser:h})(I),W=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).onChange=function(t){e.setState(Object(M.a)({},t.target.id,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,password:e.state.password,password2:e.state.password2};e.props.registerUser(a,e.props.history)},e.state={username:"",email:"",password:"",password2:"",errors:{}},e}return Object(x.a)(a,[{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("h4",null,r.a.createElement("b",null,"Register")," below"),r.a.createElement("p",{className:"grey-text text-darken-1"},"Already have an account? ",r.a.createElement(o.b,{to:"/login"},"Log in"))),r.a.createElement("form",{noValidate:!0,onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{onChange:this.onChange,value:this.state.username,error:e.username,className:H()("form-control",{invalid:e.username}),id:"username",type:"text"}),r.a.createElement("p",{className:"text-danger"},e.username)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{onChange:this.onChange,value:this.state.email,error:e.email,className:H()("form-control",{invalid:e.email}),id:"email",type:"text"}),r.a.createElement("p",{className:"text-danger"},e.email)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password,error:e.password,className:H()("form-control",{invalid:e.password}),id:"password",type:"password"}),r.a.createElement("p",{className:"text-danger"},e.password)),r.a.createElement("div",{className:"form-group col s12"},r.a.createElement("label",null,"Confirm Password"),r.a.createElement("input",{onChange:this.onChange,value:this.state.password2,error:e.password2,className:H()("form-control",{invalid:e.password2}),id:"password2",type:"password"}),r.a.createElement("p",{className:"text-danger"},e.password2)),r.a.createElement("div",{style:{paddingLeft:"11.250px"}},r.a.createElement("button",{style:{width:"150px",borderRadius:"5px",letterSpacing:"1.5px",marginTop:"1rem"},type:"submit",className:"form-group btn btn-primary btn-block"},"Sign up")))))}}]),a}(n.Component),B=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}),{registerUser:function(e,t){return function(a){d.a.post("/api/users/register",e).then((function(e){return t.push("/login")})).catch((function(e){return a({type:"GET_ERRORS",payload:e.response.data})}))}}})(Object(i.f)(W)),V=a(149),Y=Object(E.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(V.a)(e,["component","auth"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return!0===a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))})),z=a(134),J=a.n(z),q=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(w.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onLogoutClick=function(t){t.preventDefault(),e.props.logoutUser()},e}return Object(x.a)(a,[{key:"render",value:function(){var e=this.props.auth.user,t={width:"150px",borderRadius:"3px",letterSpacing:"1.5px",marginTop:"1rem",marginLeft:"1rem"};return r.a.createElement("div",{className:"bg",style:{backgroundImage:"url(".concat(J.a,")")}},r.a.createElement("div",{className:"container text-center p-5"},r.a.createElement("h1",null,"Hey ",e.username.split(" ")[0]),r.a.createElement("p",{className:"lead text-muted"},"You are logged in RideBuddies! Start looking for Rides Today!"),r.a.createElement("div",{className:"col"},r.a.createElement(o.b,{to:"/rides",style:t,className:"btn btn-primary"},"Find Rides"),r.a.createElement(o.b,{to:"/rides/myRides",style:t,className:"btn btn-secondary"},"My Rides")),r.a.createElement("button",{style:t,onClick:this.onLogoutClick,className:"btn btn-danger"},"Logout")))}}]),a}(n.Component),F=Object(E.b)((function(e){return{auth:e.auth}}),{logoutUser:g})(q),Z=a(19),Q=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.rides.group_Name),r.a.createElement("td",null,e.rides.host_email),r.a.createElement("td",null,e.rides.pickup),r.a.createElement("td",null,e.rides.location),r.a.createElement("td",null,e.rides.date.substring(0,10)+" "+e.rides.time),r.a.createElement("td",null,e.rides.seats),r.a.createElement("td",null,e.user.email===e.rides.host_email?r.a.createElement("button",{className:"btn btn-danger btn-small mr-1",onClick:function(){e.deleteRides(e.rides._id)}},"delete"):r.a.createElement("button",{className:"btn btn-primary btn-small mr-1",onClick:function(){e.joinRide(e.rides._id)}},"Join")))},X=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(w.a)(this,a),(n=t.call(this,e)).deleteRides=n.deleteRides.bind(Object(Z.a)(n)),n.joinRide=n.joinRide.bind(Object(Z.a)(n)),n.rideList=n.rideList.bind(Object(Z.a)(n));var r=n.props.auth.user;return n.state={rides:[],user:r},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("/api/rides").then((function(t){e.setState({rides:t.data})})).catch((function(e){return console.log(e)}))}},{key:"deleteRides",value:function(e){d.a.delete("/api/rides/"+e,{data:{host_email:this.state.user.email}}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),this.setState({rides:this.state.rides.filter((function(t){return t._id!==e}))})}},{key:"joinRide",value:function(e){if(this.props.auth.isAuthenticated){var t={passenger_name:this.state.user.username,passenger_email:this.state.user.email};d.a.post("/api/rides/join/"+e,t).then((function(e){window.alert(e.data),window.location="/rides/myRides"})).catch((function(e){return window.alert(e.response.data)}))}else window.location="/login"}},{key:"rideList",value:function(){var e=this;return this.state.rides.map((function(t){return t?r.a.createElement(Q,{rides:t,user:e.state.user,deleteRides:e.deleteRides,joinRide:e.joinRide,key:t._id}):""}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/"},"Back to Home"),r.a.createElement("h3",null,"Rides Available"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Group Name"),r.a.createElement("th",null,"Host Email"),r.a.createElement("th",null,"Pickup"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Seats Available"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.rideList())))}}]),a}(n.Component),$=Object(E.b)((function(e){return{auth:e.auth}}))(X),ee=function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(o.b,{to:"/rides/view/"+e.rides._id},e.rides.group_Name)),r.a.createElement("td",null,e.rides.host_email),r.a.createElement("td",null,e.rides.pickup),r.a.createElement("td",null,e.rides.location),r.a.createElement("td",null,e.rides.date.substring(0,10)+" "+e.rides.time),r.a.createElement("td",null,e.rides.seats),r.a.createElement("td",null,e.user.email===e.rides.host_email?"Yes":"No"),r.a.createElement("td",null,e.user.email===e.rides.host_email?r.a.createElement("button",{className:"btn btn-danger btn-small mr-1",onClick:function(){e.deleteRides(e.rides._id)}},"delete"):""))},te=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(w.a)(this,a);var r=(n=t.call(this,e)).props.auth.user;return n.deleteRides=n.deleteRides.bind(Object(Z.a)(n)),n.state={rides:[],user:r},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.user;d.a.get("/api/rides/myRides").then((function(a){e.setState({rides:a.data.filter((function(e){return e.passenger.some((function(e){return e.passenger_email===t.email}))||e.host_email===t.email}))})})).catch((function(e){return console.log(e)}))}},{key:"deleteRides",value:function(e){d.a.delete("/api/rides/"+e,{data:{host_email:this.state.user.email}}).then((function(e){return console.log(e.data)})).catch((function(e){return console.log(e)})),this.setState({rides:this.state.rides.filter((function(t){return t._id!==e}))})}},{key:"rideList",value:function(){var e=this;return this.state.rides.map((function(t){return r.a.createElement(ee,{rides:t,user:e.state.user,deleteRides:e.deleteRides,key:t._id})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/"},"Back to Home"),r.a.createElement("h3",null,"Your Rides"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"thead-light"},r.a.createElement("tr",null,r.a.createElement("th",null,"Group Name"),r.a.createElement("th",null,"Host Email"),r.a.createElement("th",null,"Pickup"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Seats Available"),r.a.createElement("th",null,"Host ?"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.rideList())))}}]),a}(n.Component),ae=Object(E.b)((function(e){return{auth:e.auth}}))(te),ne=a(57),re=a.n(ne),le=a(70),se=a(136),oe=a.n(se),ie=a(298),ce=(a(182),a(183),a(47)),ue=a(27),me=(a(112),a(40)),de=["places"],pe=function(e){var t=Object(ce.a)({requestOptions:{location:{lat:function(){return 37.774929},lng:function(){return-122.419418}},radius:2e5}}),a=t.ready,n=t.value,l=t.suggestions,s=l.status,o=l.data,i=t.setValue,c=t.clearSuggestions;return r.a.createElement("div",{className:"location"},r.a.createElement(ue.a,{onSelect:function(){var t=Object(le.a)(re.a.mark((function t(a){var n,r,l,s;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(a,!1),c(),t.prev=2,t.next=5,Object(ce.b)({address:a});case 5:return n=t.sent,t.next=8,Object(ce.c)(n[0]);case 8:r=t.sent,l=r.lat,s=r.lng,e.onChangeLocation(a,l,s),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(ue.b,{value:n,onChange:function(e){i(e.target.value)},disabled:!a,placeholder:"Enter an address"}),r.a.createElement(ue.e,null,r.a.createElement(ue.c,null,"OK"===s&&o.map((function(e){var t=e.id,a=e.description;return r.a.createElement(ue.d,{key:t,value:a})}))))))},he=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).onChangeGroupName=n.onChangeGroupName.bind(Object(Z.a)(n)),n.onChangeSeats=n.onChangeSeats.bind(Object(Z.a)(n)),n.onChangeLocation=n.onChangeLocation.bind(Object(Z.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(Z.a)(n)),n.onChangePickup=n.onChangePickup.bind(Object(Z.a)(n)),n.onChangeTime=n.onChangeTime.bind(Object(Z.a)(n)),n.onSubmit=n.onSubmit.bind(Object(Z.a)(n)),n.state={seats:0,group_Name:"",pickup:"",lat:0,lng:0,location:"",date:new Date,time:"",errors:{}},n}return Object(x.a)(a,[{key:"onChangeSeats",value:function(e){this.setState({seats:e.target.value})}},{key:"onChangeGroupName",value:function(e){this.setState({group_Name:e.target.value})}},{key:"onChangeLocation",value:function(e,t,a){this.setState({location:e,lat:t,lng:a})}},{key:"onChangePickup",value:function(e){this.setState({pickup:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e})}},{key:"onChangeTime",value:function(e,t){this.setState({time:t})}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a=this.props.auth.user;console.log(a);var n={host_email:a.email,seats:this.state.seats,group_Name:this.state.group_Name,pickup:this.state.pickup,lat:this.state.lat,lng:this.state.lng,location:this.state.location,date:this.state.date,time:this.state.time};d.a.post("/api/rides/add",n).then((function(){window.alert("Ride created"),window.location="/"})).catch((function(e){return t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("h3",null,"Create Ride Groups!"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Group Name: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.group_Name,onChange:this.onChangeGroupName}),r.a.createElement("p",{className:"text-danger"},e.group_Name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Seats: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.seats,onChange:this.onChangeSeats}),r.a.createElement("p",{className:"text-danger"},e.seats,e.noSeats,e.seatNaN)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Destination: "),r.a.createElement(me.c,{googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_KEY,libraries:de},r.a.createElement(pe,{onChangeLocation:this.onChangeLocation})),r.a.createElement("p",{className:"text-danger"},e.location)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Pickup: "),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.pickup,onChange:this.onChangePickup}),r.a.createElement("p",{className:"text-danger"},e.pickup)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Date: "),r.a.createElement("div",null,r.a.createElement(oe.a,{selected:this.state.date,onChange:this.onChangeDate})),r.a.createElement("p",{className:"text-danger"},e.date)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Time: "),r.a.createElement("div",null,r.a.createElement(ie.a,{use12Hours:!0,format:"h:mm A",selected:this.state.time,onChange:this.onChangeTime}),r.a.createElement("p",{className:"text-danger"},e.time))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"submit",value:"Create Ride",className:"btn btn-primary"}))))}}]),a}(n.Component),be=Object(E.b)((function(e){return{auth:e.auth,errors:e.errors}}))(he),ge=function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"col-md-2"},r.a.createElement("small",null,e.passenger.passenger_name)),r.a.createElement("h5",{className:"col-sm-3"},r.a.createElement("small",null,e.passenger.passenger_email)))},Ee=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(e){var n;Object(w.a)(this,a);var r=(n=t.call(this,e)).props.auth.user;return n.state={rides:[],passenger:[],user:r},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;d.a.get("/api/rides/view/"+t).then((function(t){e.setState({rides:t.data,passenger:t.data.passenger})})).catch((function(e){return console.log(e)}))}},{key:"passengerList",value:function(){return this.state.passenger.map((function(e){return r.a.createElement(ge,{passenger:e,key:e._id})}))}},{key:"render",value:function(){return console.log(this.state.passenger),r.a.createElement("div",{className:"container",style:{minHeight:"00px"}},r.a.createElement(o.b,{to:"/"},"Back to Home"),r.a.createElement("div",{className:"card mb-8 box-shadow"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",null,this.state.rides.group_Name),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"col-md-2"},"Location: "),r.a.createElement("h5",{className:"col-md-8"},this.state.rides.location)),r.a.createElement("div",{className:"row"},r.a.createElement("h5",{className:"col-md-2"},"Departure Date:"),r.a.createElement("h5",{className:"col-md-3"},this.state.rides.date?this.state.rides.date.substring(0,10):""," "+this.state.rides.time))),r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",null,"Passengers"),this.passengerList())))}}]),a}(n.Component),ve=Object(E.b)((function(e){return{auth:e.auth}}))(Ee),fe=a(147),Ne=a.n(fe),ye={height:"100vh",width:"100vw"},Oe={lat:37.774929,lng:-122.419418},ke={disableDefaultUI:!0,zoomControl:!0},je=["places"],Ce=function(e){var t=Object(ce.a)({requestOptions:{location:{lat:function(){return 37.774929},lng:function(){return-122.419418}},radius:2e5}}),a=t.ready,n=t.value,l=t.suggestions,s=l.status,o=l.data,i=t.setValue,c=t.clearSuggestions;return r.a.createElement("div",{className:"search"},r.a.createElement(ue.a,{onSelect:function(){var t=Object(le.a)(re.a.mark((function t(a){var n,r,l,s;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(a,!1),c(),t.prev=2,t.next=5,Object(ce.b)({address:a});case 5:return n=t.sent,t.next=8,Object(ce.c)(n[0]);case 8:r=t.sent,l=r.lat,s=r.lng,e.panTo({lat:l,lng:s}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0);case 17:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}()},r.a.createElement(ue.b,{value:n,onChange:function(e){i(e.target.value)},disabled:!a,placeholder:"Enter an address"}),r.a.createElement(ue.e,null,r.a.createElement(ue.c,null,"OK"===s&&o.map((function(e){var t=e.id,a=e.description;return r.a.createElement(ue.d,{key:t,value:a})}))))))},Se=function(e){return r.a.createElement("button",{className:"locate",onClick:function(){navigator.geolocation.getCurrentPosition((function(t){e.panTo({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(){return null}))}},r.a.createElement("img",{src:Ne.a,alt:"compass - locate me",style:{width:"40px",height:"40px"}}))},we=function(e){Object(R.a)(a,e);var t=Object(_.a)(a);function a(e){var n;return Object(w.a)(this,a),(n=t.call(this,e)).onMapLoad=n.onMapLoad.bind(Object(Z.a)(n)),n.panTo=n.panTo.bind(Object(Z.a)(n)),n.state={selected:null,map:{},rides:[],currlat:null,currlong:null,currSelected:!1},n}return Object(x.a)(a,[{key:"componentDidMount",value:function(){var e=this;d.a.get("/api/rides").then((function(t){e.setState({rides:t.data})})).catch((function(e){return console.log(e)}))}},{key:"onMapLoad",value:function(e){this.setState({map:e})}},{key:"panTo",value:function(e){var t=e.lat,a=e.lng;this.state.map.panTo({lat:t,lng:a}),this.state.map.setZoom(15),this.setState({currlat:t,currlong:a})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(me.c,{googleMapsApiKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_GOOGLE_KEY,libraries:je},r.a.createElement(Ce,{panTo:this.panTo}),r.a.createElement(Se,{panTo:this.panTo}),r.a.createElement("h2",null,"Rides Locations"),r.a.createElement(me.a,{mapContainerStyle:ye,zoom:8,center:Oe,options:ke,onLoad:this.onMapLoad},this.state.rides.map((function(t){return r.a.createElement(me.d,{key:t.id,position:{lat:t.lat,lng:t.lng},onClick:function(){return e.setState({selected:t})}})})),this.state.currlat?r.a.createElement(me.d,{key:1,position:{lat:this.state.currlat,lng:this.state.currlong},icon:{url:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png"},onClick:function(){return e.setState({currSelected:!0})}}):"",this.state.currSelected?r.a.createElement(me.b,{position:{lat:this.state.currlat,lng:this.state.currlong},onCloseClick:function(){return e.setState({currSelected:!1})}},r.a.createElement("h4",null,"You are here!")):null,this.state.selected?r.a.createElement(me.b,{position:{lat:this.state.selected.lat,lng:this.state.selected.lng},onCloseClick:function(){return e.setState({selected:null})}},r.a.createElement("div",{className:"info-box"},r.a.createElement("p",{className:"info-title"},this.state.selected.group_Name),r.a.createElement("p",{className:"info-subtitle"},"Seats: ",this.state.selected.seats),r.a.createElement("p",{className:"info-subtitle"},"Where:"),r.a.createElement("p",{className:"info-text"},this.state.selected.location),r.a.createElement("p",{className:"info-subtitle"},"Pickup:"),r.a.createElement("p",{className:"info-text"},this.state.selected.pickup),r.a.createElement("p",{className:"info-subtitle"},"When:"),r.a.createElement("p",{className:"info-text"},this.state.selected.date.substring(0,10)+" "+this.state.selected.time))):null)))}}]),a}(n.Component);if(localStorage.jwtToken){var xe=localStorage.jwtToken;p(xe);var Re=u()(xe);S.dispatch(b(Re));var _e=Date.now()/1e3;Re.exp<_e&&(S.dispatch(g()),window.location.href="./login")}var Le=function(){return r.a.createElement(E.a,{store:S},r.a.createElement(o.a,null,r.a.createElement(T,null),r.a.createElement(i.b,{path:"/",exact:!0,component:U}),r.a.createElement(i.b,{path:"/register",exact:!0,component:B}),r.a.createElement(i.b,{path:"/login",exact:!0,component:K}),r.a.createElement(i.b,{path:"/rides",exact:!0,component:$}),r.a.createElement(i.b,{path:"/rides/view/:id",exact:!0,component:ve}),r.a.createElement(i.b,{path:"/map",exact:!0,component:we}),r.a.createElement(Y,{path:"/rides/add",exact:!0,component:be}),r.a.createElement(Y,{path:"/rides/myRides",exact:!0,component:ae}),r.a.createElement(Y,{exact:!0,path:"/dashboard",component:F})))};s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le,null)),document.getElementById("root"))}},[[150,1,2]]]);
//# sourceMappingURL=main.1f2905cb.chunk.js.map